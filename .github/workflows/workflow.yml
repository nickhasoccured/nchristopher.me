name: Generate Site

on:
    push:
        branches:
            - main

jobs:
    build-deploy:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout Repo
              uses: actions/checkout@master
              with:
                  submodules: true
            - name: Publish Site
              uses: chabad360/hugo-gh-pages@b0f6144d4f9898856f67a4bfad5fdd525259bc3c
              with:
                  githubToken: ${{ secrets.PERSONAL_TOKEN }}
                  branch: generated
                  cname: nchristopher.me
                  args: --gc --cleanDestinationDir
